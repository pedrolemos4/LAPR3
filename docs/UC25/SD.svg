<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2439px" preserveAspectRatio="none" style="width:3880px;height:2439px;" version="1.1" viewBox="0 0 3880 2439" width="3880px" zoomAndPan="magnify"><defs><filter height="300%" id="fqy7vq5e1iri7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="2217.7656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="472.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="880.9531" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="645.1563"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="359.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="1555.2422"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="393.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="1943.8672"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="355.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="276.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="674.2891"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="392.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1088.75"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1584.375"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="151.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1726.9063"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="372.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1943.8672"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="118.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1295" y="444.4922"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="239.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1295" y="711.4219"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474.5" y="297.0938"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1586.5" y="2241.9297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1682" y="356.2266"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1780" y="201.8281"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1780" y="1321.2813"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1884" y="921.2188"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1977.5" y="1196.0156"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1977.5" y="1255.1484"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1451.6797"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1613.5078"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="2002.1328"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="2153.6641"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2283.5" y="532.7578"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2283.5" y="862.0859"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2403.5" y="444.4922"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="122.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2516.5" y="1756.0391"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2685.5" y="980.3516"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3022.5" y="1009.4844"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3616" y="1136.8828"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="105.3984" style="stroke:#000000;stroke-width:2.0;" width="1305" x="540.5" y="134.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="686.2578" style="stroke:#000000;stroke-width:2.0;" width="3723.5" x="10" y="606.8906"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="377.3281" style="stroke:#000000;stroke-width:2.0;" width="2847" x="530.5" y="731.4219"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="307.0625" style="stroke:#000000;stroke-width:2.0;" width="2827" x="540.5" y="794.6875"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="261.9297" style="stroke:#000000;stroke-width:2.0;" width="2160.5" x="10" y="2047.1328"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="635.5" x2="635.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1020.5" x2="1020.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1299.5" x2="1299.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1479.5" x2="1479.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1591.5" x2="1591.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1686.5" x2="1686.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1784.5" x2="1784.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1888.5" x2="1888.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1982.5" x2="1982.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2096.5" x2="2096.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2288.5" x2="2288.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2408.5" x2="2408.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2521.5" x2="2521.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2690" x2="2690" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3027.5" x2="3027.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3367.5" x2="3367.5" y1="1796.6875" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3466.5" x2="3466.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3620.5" x2="3620.5" y1="88.2969" y2="2355.1953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3801.5" x2="3801.5" y1="1492.3281" y2="2355.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="20" y="84.9951">Cliente</text><ellipse cx="49" cy="15" fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49,23 L49,50 M36,31 L62,31 M49,50 L36,65 M49,50 L62,65 " fill="none" filter="url(#fqy7vq5e1iri7)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="20" y="2367.1904">Cliente</text><ellipse cx="49" cy="2380.4922" fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49,2388.4922 L49,2415.4922 M36,2396.4922 L62,2396.4922 M49,2415.4922 L36,2430.4922 M49,2415.4922 L62,2430.4922 " fill="none" filter="url(#fqy7vq5e1iri7)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="550.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="557.5" y="72.9951">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="550.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="557.5" y="2374.1904">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="905.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="912.5" y="72.9951">:RealizaEncomendaController</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="905.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="912.5" y="2374.1904">:RealizaEncomendaController</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="1184.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="1191.5" y="72.9951">:PedirItemFarmaciaController</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="1184.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="1191.5" y="2374.1904">:PedirItemFarmaciaController</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="1425.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1432.5" y="72.9951">:UserSession</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="1425.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1432.5" y="2374.1904">:UserSession</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1543.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1550.5" y="72.9951">:ClienteDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="1543.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1550.5" y="2374.1904">:ClienteDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1649.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1656.5" y="72.9951">:Cliente</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1649.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1656.5" y="2374.1904">:Cliente</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1734.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1741.5" y="72.9951">:ProdutoDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="1734.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1741.5" y="2374.1904">:ProdutoDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="83" x="1845.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1852.5" y="72.9951">:Farmacia</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="83" x="1845.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1852.5" y="2374.1904">:Farmacia</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="76" x="1942.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1949.5" y="72.9951">:Produto</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="76" x="1942.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1949.5" y="2374.1904">:Produto</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="2032.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="2039.5" y="72.9951">:EncomendaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="124" x="2032.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="2039.5" y="2374.1904">:EncomendaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="2234.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="2241.5" y="72.9951">:FarmaciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="2234.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="2241.5" y="2374.1904">:FarmaciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="2352.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="2359.5" y="72.9951">:EnderecoDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="2352.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="2359.5" y="2374.1904">:EnderecoDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="2474.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="2481.5" y="72.9951">:ReciboDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="2474.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="2481.5" y="2374.1904">:ReciboDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="175" x="2601" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="2608" y="72.9951">:PedirItemFarmaciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="175" x="2601" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="2608" y="2374.1904">:PedirItemFarmaciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="2956.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2963.5" y="72.9951">:TransferenciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="2956.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2963.5" y="2374.1904">:TransferenciaDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="3319.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="3326.5" y="2374.1904">rec:Recibo</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="3425.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="3432.5" y="72.9951">:EmailDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="79" x="3425.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="3432.5" y="2374.1904">:EmailDB</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="201" x="3518.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="3584.5" y="56.6982">lprodutos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="3525.5" y="72.9951">:ListaProdutosEncomenda</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="201" x="3518.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="3584.5" y="2374.1904">lprodutos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="3525.5" y="2390.4873">:ListaProdutosEncomenda</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="3733.5" y="2354.1953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="3740.5" y="2374.1904">enc: Encomenda</text><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="2217.7656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="472.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="880.9531" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="645.1563"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="359.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="1555.2422"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="393.3281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="631" y="1943.8672"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="355.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="119.4297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="276.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="674.2891"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="392.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1088.75"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1584.375"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="151.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1726.9063"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="372.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1016" y="1943.8672"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="118.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1295" y="444.4922"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="239.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1295" y="711.4219"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1474.5" y="297.0938"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1586.5" y="2241.9297"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1682" y="356.2266"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1780" y="201.8281"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1780" y="1321.2813"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1884" y="921.2188"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1977.5" y="1196.0156"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1977.5" y="1255.1484"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1451.6797"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="1613.5078"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="2002.1328"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2091.5" y="2153.6641"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2283.5" y="532.7578"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2283.5" y="862.0859"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2403.5" y="444.4922"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="122.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2516.5" y="1756.0391"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2685.5" y="980.3516"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3022.5" y="1009.4844"/><rect fill="#FFFFFF" filter="url(#fqy7vq5e1iri7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="3616" y="1136.8828"/><polygon fill="#A80036" points="619,115.4297,629,119.4297,619,123.4297,623,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="625" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="61" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="74" y="114.3638">pretende realizar a encomenda</text><path d="M540.5,134.4297 L618.5,134.4297 L618.5,141.4297 L608.5,151.4297 L540.5,151.4297 L540.5,134.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="105.3984" style="stroke:#000000;stroke-width:2.0;" width="1305" x="540.5" y="134.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="555.5" y="147.4966">loop</text><polygon fill="#A80036" points="1004,168.6953,1014,172.6953,1004,176.6953,1008,172.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="172.6953" y2="172.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="648" y="167.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="661" y="167.6294">getListStock(nif)</text><polygon fill="#A80036" points="1768,197.8281,1778,201.8281,1768,205.8281,1772,201.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1774" y1="201.8281" y2="201.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="1033" y="196.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1045" y="196.7622">getLista(nif)</text><polygon fill="#A80036" points="1004,263.9609,1014,267.9609,1004,271.9609,1008,267.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="267.9609" y2="267.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="648" y="262.895">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="661" y="262.895">getCliente()</text><polygon fill="#A80036" points="1462.5,293.0938,1472.5,297.0938,1462.5,301.0938,1466.5,297.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1468.5" y1="297.0938" y2="297.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1033" y="292.0278">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="1046" y="292.0278">getUser()</text><polygon fill="#A80036" points="1670,352.2266,1680,356.2266,1670,360.2266,1674,356.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1676" y1="356.2266" y2="356.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1033" y="351.1606">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1046" y="351.1606">nif = getNIF()</text><polygon fill="#A80036" points="1004,411.3594,1014,415.3594,1004,419.3594,1008,415.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="415.3594" y2="415.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="648" y="410.2935">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="661" y="410.2935">enderecoCliente = getEnderecoByNifCliente(nif)</text><polygon fill="#A80036" points="2391.5,440.4922,2401.5,444.4922,2391.5,448.4922,2395.5,444.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2397.5" y1="444.4922" y2="444.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1033" y="439.4263">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="1046" y="439.4263">getEnderecoByNifCliente(nif)</text><polygon fill="#A80036" points="1283,499.625,1293,503.625,1283,507.625,1287,503.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1289" y1="503.625" y2="503.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="648" y="498.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="661" y="498.5591">generateGraph(graph)</text><polygon fill="#A80036" points="2271.5,528.7578,2281.5,532.7578,2271.5,536.7578,2275.5,532.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1305" x2="2277.5" y1="532.7578" y2="532.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1312" y="527.6919">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="1335" y="527.6919">generateGraph(graph)</text><polygon fill="#A80036" points="65,587.8906,55,591.8906,65,595.8906,61,591.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="635" y1="591.8906" y2="591.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="71" y="586.8247">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="531" x="93" y="586.8247">apresenta lista de produtos e pede para selecionar os produtos para a encomenda</text><path d="M10,606.8906 L88,606.8906 L88,613.8906 L78,623.8906 L10,623.8906 L10,606.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="686.2578" style="stroke:#000000;stroke-width:2.0;" width="3723.5" x="10" y="606.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="25" y="619.9575">loop</text><polygon fill="#A80036" points="619,641.1563,629,645.1563,619,649.1563,623,645.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="625" y1="645.1563" y2="645.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="61" y="640.0903">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308" x="83" y="640.0903">introduz o produto e a quantidade que pretende</text><polygon fill="#A80036" points="1004,670.2891,1014,674.2891,1004,678.2891,1008,674.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="674.2891" y2="674.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="648" y="669.2231">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="669" y="669.2231">produtoEncomenda(nif,produto,quant)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1073" y1="698.4219" y2="698.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1073" x2="1073" y1="698.4219" y2="711.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1032" x2="1073" y1="711.4219" y2="711.4219"/><polygon fill="#A80036" points="1042,707.4219,1032,711.4219,1042,715.4219,1038,711.4219" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1038" y="693.356">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="1060" y="693.356">verificaProdutoStock(produto,quant)</text><path d="M530.5,731.4219 L602.5,731.4219 L602.5,738.4219 L592.5,748.4219 L530.5,748.4219 L530.5,731.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="377.3281" style="stroke:#000000;stroke-width:2.0;" width="2847" x="530.5" y="731.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="545.5" y="744.4888">opt</text><path d="M619,753.5547 L619,778.5547 L1418,778.5547 L1418,763.5547 L1408,753.5547 L619,753.5547 " fill="#FBFB77" filter="url(#fqy7vq5e1iri7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1408,753.5547 L1408,763.5547 L1418,763.5547 L1408,753.5547 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="778" x="625" y="770.6216">Se nao houver o produto no stock na 1 farmacia percorre a lista de farmacias para encontrar outra farmacia com o stock</text><path d="M540.5,794.6875 L618.5,794.6875 L618.5,801.6875 L608.5,811.6875 L540.5,811.6875 L540.5,794.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="307.0625" style="stroke:#000000;stroke-width:2.0;" width="2827" x="540.5" y="794.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="555.5" y="807.7544">loop</text><polygon fill="#A80036" points="1283,828.9531,1293,832.9531,1283,836.9531,1287,832.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1289" y1="832.9531" y2="832.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="648" y="827.8872">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="670" y="827.8872">getFarmaciaProxima(graph,enderecoCliente, lista)</text><polygon fill="#A80036" points="2271.5,858.0859,2281.5,862.0859,2271.5,866.0859,2275.5,862.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1305" x2="2277.5" y1="862.0859" y2="862.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1312" y="857.02">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="486" x="1334" y="857.02">farmciaProximaCliente = getFarmaciaProxima(graph,enderecoCliente, lista)</text><polygon fill="#A80036" points="1872,917.2188,1882,921.2188,1872,925.2188,1876,921.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1305" x2="1878" y1="921.2188" y2="921.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1312" y="916.1528">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="1334" y="916.1528">nifFarmProx = getNIF()</text><polygon fill="#A80036" points="2673.5,976.3516,2683.5,980.3516,2673.5,984.3516,2677.5,980.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="2679.5" y1="980.3516" y2="980.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="648" y="975.2856">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="452" x="670" y="975.2856">realizaPedido(farmacia1, farmciaProximaCliente, produto, quantidade)</text><polygon fill="#A80036" points="3010.5,1005.4844,3020.5,1009.4844,3010.5,1013.4844,3014.5,1009.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2695.5" x2="3016.5" y1="1009.4844" y2="1009.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2702.5" y="1004.4185">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="2724.5" y="1004.4185">realizaPedido(fOrig, fDest, prod, quantidade)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3032.5" x2="3074.5" y1="1038.6172" y2="1038.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3074.5" x2="3074.5" y1="1038.6172" y2="1051.6172"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3033.5" x2="3074.5" y1="1051.6172" y2="1051.6172"/><polygon fill="#A80036" points="3043.5,1047.6172,3033.5,1051.6172,3043.5,1055.6172,3039.5,1051.6172" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="3039.5" y="1033.5513">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="3062.5" y="1033.5513">addTransferencia(nif1, nif2, id, quantidade, 1)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3037.5" x2="3079.5" y1="1080.75" y2="1080.75"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3079.5" x2="3079.5" y1="1080.75" y2="1093.75"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3038.5" x2="3079.5" y1="1093.75" y2="1093.75"/><polygon fill="#A80036" points="3048.5,1089.75,3038.5,1093.75,3048.5,1097.75,3044.5,1093.75" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="3044.5" y="1075.6841">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="3066.5" y="1075.6841">enviarStock(fOrig, fDest, prod, quantidade)</text><polygon fill="#A80036" points="3604,1132.8828,3614,1136.8828,3604,1140.8828,3608,1136.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="3610" y1="1136.8828" y2="1136.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1131.8169">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="1055" y="1131.8169">addNovoProduto(produto)</text><polygon fill="#A80036" points="1965.5,1192.0156,1975.5,1196.0156,1965.5,1200.0156,1969.5,1196.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1971.5" y1="1196.0156" y2="1196.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1033" y="1190.9497">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1054" y="1190.9497">preco = getPreco()</text><polygon fill="#A80036" points="1965.5,1251.1484,1975.5,1255.1484,1965.5,1259.1484,1969.5,1255.1484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1971.5" y1="1255.1484" y2="1255.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1250.0825">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1055" y="1250.0825">peso = getPeso()</text><polygon fill="#A80036" points="1768,1317.2813,1778,1321.2813,1768,1325.2813,1772,1321.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1774" y1="1321.2813" y2="1321.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1316.2153">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="1055" y="1316.2153">lista = getListaProdutos()</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1068" y1="1380.4141" y2="1380.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1068" x2="1068" y1="1380.4141" y2="1393.4141"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1027" x2="1068" y1="1393.4141" y2="1393.4141"/><polygon fill="#A80036" points="1037,1389.4141,1027,1393.4141,1037,1397.4141,1033,1393.4141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1375.3481">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1055" y="1375.3481">precoTotal = getPrecoTotal()</text><polygon fill="#A80036" points="652,1418.5469,642,1422.5469,652,1426.5469,648,1422.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="646" x2="1015" y1="1422.5469" y2="1422.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="658" y="1417.481">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="680" y="1417.481">dataPedida = getData()</text><polygon fill="#A80036" points="2079.5,1447.6797,2089.5,1451.6797,2079.5,1455.6797,2083.5,1451.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2085.5" y1="1451.6797" y2="1451.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1446.6138">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="536" x="1055" y="1446.6138">enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)</text><polygon fill="#A80036" points="3721.5,1476.8125,3731.5,1480.8125,3721.5,1484.8125,3725.5,1480.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2096.5" x2="3727.5" y1="1480.8125" y2="1480.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2103.5" y="1475.7466">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="428" x="2125.5" y="1475.7466">create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="3733.5" y="1459.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="3740.5" y="1479.6748">enc: Encomenda</text><polygon fill="#A80036" points="65,1522.1094,55,1526.1094,65,1530.1094,61,1526.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="635" y1="1526.1094" y2="1526.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="71" y="1521.0435">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="93" y="1521.0435">apresenta a encomenda e pede confirmação</text><polygon fill="#A80036" points="619,1551.2422,629,1555.2422,619,1559.2422,623,1555.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="625" y1="1555.2422" y2="1555.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="61" y="1550.1763">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="82" y="1550.1763">confirma</text><polygon fill="#A80036" points="1004,1580.375,1014,1584.375,1004,1588.375,1008,1584.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="1584.375" y2="1584.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="648" y="1579.3091">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="669" y="1579.3091">registaEncomenda(enc)</text><polygon fill="#A80036" points="2079.5,1609.5078,2089.5,1613.5078,2079.5,1617.5078,2083.5,1613.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2085.5" y1="1613.5078" y2="1613.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="1033" y="1608.4419">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1053" y="1608.4419">registaEncomenda(encomenda)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2101.5" x2="2143.5" y1="1642.6406" y2="1642.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2143.5" x2="2143.5" y1="1642.6406" y2="1655.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2102.5" x2="2143.5" y1="1655.6406" y2="1655.6406"/><polygon fill="#A80036" points="2112.5,1651.6406,2102.5,1655.6406,2112.5,1659.6406,2108.5,1655.6406" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2108.5" y="1637.5747">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="2129.5" y="1637.5747">validaEncomenda(enc)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2101.5" x2="2143.5" y1="1689.7734" y2="1689.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2143.5" x2="2143.5" y1="1689.7734" y2="1702.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2096.5" x2="2143.5" y1="1702.7734" y2="1702.7734"/><polygon fill="#A80036" points="2106.5,1698.7734,2096.5,1702.7734,2106.5,1706.7734,2102.5,1702.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2108.5" y="1684.7075">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="2129.5" y="1684.7075">addEncomenda(enc)</text><polygon fill="#A80036" points="1004,1722.9063,1014,1726.9063,1004,1730.9063,1008,1726.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="1726.9063" y2="1726.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="648" y="1721.8403">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="335" x="669" y="1721.8403">novoRecibo(nifCliente, precoTotal, lista, dataPedida)</text><polygon fill="#A80036" points="2504.5,1752.0391,2514.5,1756.0391,2504.5,1760.0391,2508.5,1756.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2510.5" y1="1756.0391" y2="1756.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1033" y="1750.9731">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="1054" y="1750.9731">create(nifCliente, precoTotal, lista, dataPedida)</text><polygon fill="#A80036" points="3307.5,1781.1719,3317.5,1785.1719,3307.5,1789.1719,3311.5,1785.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2526.5" x2="3313.5" y1="1785.1719" y2="1785.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2533.5" y="1780.106">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="2554.5" y="1780.106">create(nifCliente, precoTotal, lista, dataPedida)</text><rect fill="#FEFECE" filter="url(#fqy7vq5e1iri7)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="3319.5" y="1764.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="3326.5" y="1784.0342">rec:Recibo</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2526.5" x2="2568.5" y1="1830.4688" y2="1830.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2568.5" x2="2568.5" y1="1830.4688" y2="1843.4688"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2527.5" x2="2568.5" y1="1843.4688" y2="1843.4688"/><polygon fill="#A80036" points="2537.5,1839.4688,2527.5,1843.4688,2537.5,1847.4688,2533.5,1843.4688" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2533.5" y="1825.4028">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="2554.5" y="1825.4028">validateRecibo(rec)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2526.5" x2="2568.5" y1="1877.6016" y2="1877.6016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2568.5" x2="2568.5" y1="1877.6016" y2="1890.6016"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2521.5" x2="2568.5" y1="1890.6016" y2="1890.6016"/><polygon fill="#A80036" points="2531.5,1886.6016,2521.5,1890.6016,2531.5,1894.6016,2527.5,1890.6016" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="2533.5" y="1872.5356">40</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="2556.5" y="1872.5356">addRecibo(rec)</text><polygon fill="#A80036" points="65,1910.7344,55,1914.7344,65,1918.7344,61,1914.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="635" y1="1914.7344" y2="1914.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="71" y="1909.6685">41</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="93" y="1909.6685">solicita se quer pagar com creditos</text><polygon fill="#A80036" points="619,1939.8672,629,1943.8672,619,1947.8672,623,1943.8672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="625" y1="1943.8672" y2="1943.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="61" y="1938.8013">42</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="83" y="1938.8013">Insere os dados pedidos</text><polygon fill="#A80036" points="1004,1969,1014,1973,1004,1977,1008,1973" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="1973" y2="1973"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="648" y="1967.9341">43</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="669" y="1967.9341">geraCreditos(c, precoTotal)</text><polygon fill="#A80036" points="2079.5,1998.1328,2089.5,2002.1328,2079.5,2006.1328,2083.5,2002.1328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2085.5" y1="2002.1328" y2="2002.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="1997.0669">44</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="1055" y="1997.0669">geraCreditos(c, precoTotal)</text><path d="M10,2047.1328 L82,2047.1328 L82,2054.1328 L72,2064.1328 L10,2064.1328 L10,2047.1328 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="261.9297" style="stroke:#000000;stroke-width:2.0;" width="2160.5" x="10" y="2047.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="25" y="2060.1997">opt</text><path d="M591,2069.2656 L591,2094.2656 L676,2094.2656 L676,2079.2656 L666,2069.2656 L591,2069.2656 " fill="#FBFB77" filter="url(#fqy7vq5e1iri7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M666,2069.2656 L666,2079.2656 L676,2079.2656 L666,2069.2656 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="597" y="2086.3325">se for sim</text><polygon fill="#A80036" points="1004,2120.5313,1014,2124.5313,1004,2128.5313,1008,2124.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="2124.5313" y2="2124.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="648" y="2119.4653">45</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="670" y="2119.4653">getCreditosData(dataPedida, precoTotal)</text><polygon fill="#A80036" points="2079.5,2149.6641,2089.5,2153.6641,2079.5,2157.6641,2083.5,2153.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="2085.5" y1="2153.6641" y2="2153.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="2148.5981">46</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="1055" y="2148.5981">creds = getCreditosData(dataPedida, precoTotal)</text><polygon fill="#A80036" points="1004,2208.7969,1014,2212.7969,1004,2216.7969,1008,2212.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1010" y1="2212.7969" y2="2212.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="648" y="2207.731">47</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="670" y="2207.731">removeCreditos(nifCliente, creds)</text><polygon fill="#A80036" points="1574.5,2237.9297,1584.5,2241.9297,1574.5,2245.9297,1578.5,2241.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1026" x2="1580.5" y1="2241.9297" y2="2241.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1033" y="2236.8638">48</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1055" y="2236.8638">removerCreditos(nifCliente, creds)</text><polygon fill="#A80036" points="65,2297.0625,55,2301.0625,65,2305.0625,61,2301.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="630" y1="2301.0625" y2="2301.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="71" y="2295.9966">49</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="93" y="2295.9966">remove os creditos</text><polygon fill="#A80036" points="60,2333.1953,50,2337.1953,60,2341.1953,56,2337.1953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="635" y1="2337.1953" y2="2337.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="66" y="2332.1294">50</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="89" y="2332.1294">gera o recibo e informa o sucesso da operação</text><!--MD5=[34eb3ad4fd7a3a88cd087fbba0b7906e]
@startuml
autonumber
'hide footbox
actor "Cliente" as CLI

participant ":RealizaEncomendaUI" as UI
participant ":RealizaEncomendaController" as CTRL
participant ":PedirItemFarmaciaController" as CTRL1
participant ":UserSession" as USS
participant ":ClienteDB" as DH
participant ":Cliente" as CLIEN
participant ":ProdutoDB" as PDH
participant ":Farmacia" as FAR
participant ":Produto" as PRO
participant ":EncomendaDB" as EDH
participant ":FarmaciaDB" as FDB
participant ":EnderecoDB" as END
participant ":ReciboDB" as RDH
participant ":PedirItemFarmaciaDB" as PEIC
participant ":TransferenciaDB" as TDB
participant "rec:Recibo" as REC
participant ":EmailDB" as EMDB
participant "lprodutos\n:ListaProdutosEncomenda" as LPROD
participant "enc: Encomenda" as ENC


CLI - -> UI : pretende realizar a encomenda
activate CLI
activate UI


LOOP
activate CTRL
UI - -> CTRL : getListStock(nif)

CTRL - -> PDH : getLista(nif)
activate PDH
deactivate PDH
END LOOP

UI - -> CTRL : getCliente()

CTRL - -> USS : getUser()
activate USS
deactivate USS

CTRL - -> CLIEN : nif = getNIF()
activate CLIEN
deactivate CLIEN

UI - -> CTRL : enderecoCliente = getEnderecoByNifCliente(nif)

CTRL - -> END : getEnderecoByNifCliente(nif)
activate END
deactivate END
deactivate CTRL

activate CTRL1
UI - -> CTRL1 : generateGraph(graph)

CTRL1 - -> FDB : generateGraph(graph)
activate FDB
deactivate FDB

deactivate CTRL1

deactivate CTRL

UI - -> CLI : apresenta lista de produtos e pede para selecionar os produtos para a encomenda
deactivate UI


LOOP
CLI - -> UI : introduz o produto e a quantidade que pretende
activate UI

UI - -> CTRL : produtoEncomenda(nif,produto,quant)
activate CTRL

CTRL - -> CTRL : verificaProdutoStock(produto,quant)

OPT
note  over CTRL : Se nao houver o produto no stock na 1 farmacia percorre a lista de farmacias para encontrar outra farmacia com o stock 

LOOP 

activate CTRL1
UI - -> CTRL1 : getFarmaciaProxima(graph,enderecoCliente, lista)

CTRL1 - -> FDB : farmciaProximaCliente = getFarmaciaProxima(graph,enderecoCliente, lista)
activate FDB
deactivate FDB

CTRL1 - -> FAR : nifFarmProx = getNIF()
activate FAR 
deactivate FAR

deactivate CTRL1
deactivate CTRL
UI - -> PEIC : realizaPedido(farmacia1, farmciaProximaCliente, produto, quantidade)
activate PEIC

PEIC - -> TDB : realizaPedido(fOrig, fDest, prod, quantidade)
activate TDB

TDB - -> TDB: addTransferencia(nif1, nif2, id, quantidade, 1)
TDB - -> TDB: enviarStock(fOrig, fDest, prod, quantidade)

deactivate TDB

deactivate PEIC

activate CTRL
END LOOP

END OPT

CTRL - -> LPROD : addNovoProduto(produto)
activate LPROD

deactivate PDH
deactivate LPROD

CTRL - -> PRO : preco = getPreco()
activate PRO
deactivate PRO

CTRL - -> PRO : peso = getPeso()
activate PRO
deactivate PRO

END LOOP

CTRL - -> PDH : lista = getListaProdutos()
activate PDH
deactivate PDH

CTRL - -> CTRL : precoTotal = getPrecoTotal()

CTRL - -> UI : dataPedida = getData()

CTRL - -> EDH : enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
activate EDH

EDH - -> ENC ** : create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
deactivate EDH

deactivate CTRL

UI - -> CLI : apresenta a encomenda e pede confirmação
deactivate UI

CLI - -> UI : confirma
activate UI

UI - -> CTRL : registaEncomenda(enc)
activate CTRL

CTRL - -> EDH : registaEncomenda(encomenda)
activate EDH
EDH -> EDH : validaEncomenda(enc)
EDH -> EDH: addEncomenda(enc)
deactivate EDH

deactivate CTRL

UI - -> CTRL : novoRecibo(nifCliente, precoTotal, lista, dataPedida)
activate CTRL

CTRL - -> RDH : create(nifCliente, precoTotal, lista, dataPedida)
activate RDH

RDH - -> REC ** : create(nifCliente, precoTotal, lista, dataPedida)

RDH - -> RDH : validateRecibo(rec)

RDH - -> RDH : addRecibo(rec)
deactivate RDH

deactivate CTRL

UI - -> CLI : solicita se quer pagar com creditos
deactivate UI

CLI - -> UI : Insere os dados pedidos
activate UI

activate CTRL
UI - -> CTRL : geraCreditos(c, precoTotal)

CTRL - -> EDH : geraCreditos(c, precoTotal)
activate EDH
deactivate EDH

OPT
note over UI : se for sim
UI - -> CTRL : getCreditosData(dataPedida, precoTotal)

CTRL - -> EDH : creds = getCreditosData(dataPedida, precoTotal)
activate EDH
deactivate EDH


UI - -> CTRL: removeCreditos(nifCliente, creds)

CTRL - -> DH : removerCreditos(nifCliente, creds)
activate DH

deactivate DH
UI - -> CLI : remove os creditos

END OPT

deactivate CTRL
UI - -> CLI: gera o recibo e informa o sucesso da operação
deactivate UI
deactivate CLI
@enduml

@startuml
autonumber
actor "Cliente" as CLI

participant ":RealizaEncomendaUI" as UI
participant ":RealizaEncomendaController" as CTRL
participant ":PedirItemFarmaciaController" as CTRL1
participant ":UserSession" as USS
participant ":ClienteDB" as DH
participant ":Cliente" as CLIEN
participant ":ProdutoDB" as PDH
participant ":Farmacia" as FAR
participant ":Produto" as PRO
participant ":EncomendaDB" as EDH
participant ":FarmaciaDB" as FDB
participant ":EnderecoDB" as END
participant ":ReciboDB" as RDH
participant ":PedirItemFarmaciaDB" as PEIC
participant ":TransferenciaDB" as TDB
participant "rec:Recibo" as REC
participant ":EmailDB" as EMDB
participant "lprodutos\n:ListaProdutosEncomenda" as LPROD
participant "enc: Encomenda" as ENC


CLI - -> UI : pretende realizar a encomenda
activate CLI
activate UI


LOOP
activate CTRL
UI - -> CTRL : getListStock(nif)

CTRL - -> PDH : getLista(nif)
activate PDH
deactivate PDH
END LOOP

UI - -> CTRL : getCliente()

CTRL - -> USS : getUser()
activate USS
deactivate USS

CTRL - -> CLIEN : nif = getNIF()
activate CLIEN
deactivate CLIEN

UI - -> CTRL : enderecoCliente = getEnderecoByNifCliente(nif)

CTRL - -> END : getEnderecoByNifCliente(nif)
activate END
deactivate END
deactivate CTRL

activate CTRL1
UI - -> CTRL1 : generateGraph(graph)

CTRL1 - -> FDB : generateGraph(graph)
activate FDB
deactivate FDB

deactivate CTRL1

deactivate CTRL

UI - -> CLI : apresenta lista de produtos e pede para selecionar os produtos para a encomenda
deactivate UI


LOOP
CLI - -> UI : introduz o produto e a quantidade que pretende
activate UI

UI - -> CTRL : produtoEncomenda(nif,produto,quant)
activate CTRL

CTRL - -> CTRL : verificaProdutoStock(produto,quant)

OPT
note  over CTRL : Se nao houver o produto no stock na 1 farmacia percorre a lista de farmacias para encontrar outra farmacia com o stock 

LOOP 

activate CTRL1
UI - -> CTRL1 : getFarmaciaProxima(graph,enderecoCliente, lista)

CTRL1 - -> FDB : farmciaProximaCliente = getFarmaciaProxima(graph,enderecoCliente, lista)
activate FDB
deactivate FDB

CTRL1 - -> FAR : nifFarmProx = getNIF()
activate FAR 
deactivate FAR

deactivate CTRL1
deactivate CTRL
UI - -> PEIC : realizaPedido(farmacia1, farmciaProximaCliente, produto, quantidade)
activate PEIC

PEIC - -> TDB : realizaPedido(fOrig, fDest, prod, quantidade)
activate TDB

TDB - -> TDB: addTransferencia(nif1, nif2, id, quantidade, 1)
TDB - -> TDB: enviarStock(fOrig, fDest, prod, quantidade)

deactivate TDB

deactivate PEIC

activate CTRL
END LOOP

END OPT

CTRL - -> LPROD : addNovoProduto(produto)
activate LPROD

deactivate PDH
deactivate LPROD

CTRL - -> PRO : preco = getPreco()
activate PRO
deactivate PRO

CTRL - -> PRO : peso = getPeso()
activate PRO
deactivate PRO

END LOOP

CTRL - -> PDH : lista = getListaProdutos()
activate PDH
deactivate PDH

CTRL - -> CTRL : precoTotal = getPrecoTotal()

CTRL - -> UI : dataPedida = getData()

CTRL - -> EDH : enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
activate EDH

EDH - -> ENC ** : create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
deactivate EDH

deactivate CTRL

UI - -> CLI : apresenta a encomenda e pede confirmação
deactivate UI

CLI - -> UI : confirma
activate UI

UI - -> CTRL : registaEncomenda(enc)
activate CTRL

CTRL - -> EDH : registaEncomenda(encomenda)
activate EDH
EDH -> EDH : validaEncomenda(enc)
EDH -> EDH: addEncomenda(enc)
deactivate EDH

deactivate CTRL

UI - -> CTRL : novoRecibo(nifCliente, precoTotal, lista, dataPedida)
activate CTRL

CTRL - -> RDH : create(nifCliente, precoTotal, lista, dataPedida)
activate RDH

RDH - -> REC ** : create(nifCliente, precoTotal, lista, dataPedida)

RDH - -> RDH : validateRecibo(rec)

RDH - -> RDH : addRecibo(rec)
deactivate RDH

deactivate CTRL

UI - -> CLI : solicita se quer pagar com creditos
deactivate UI

CLI - -> UI : Insere os dados pedidos
activate UI

activate CTRL
UI - -> CTRL : geraCreditos(c, precoTotal)

CTRL - -> EDH : geraCreditos(c, precoTotal)
activate EDH
deactivate EDH

OPT
note over UI : se for sim
UI - -> CTRL : getCreditosData(dataPedida, precoTotal)

CTRL - -> EDH : creds = getCreditosData(dataPedida, precoTotal)
activate EDH
deactivate EDH


UI - -> CTRL: removeCreditos(nifCliente, creds)

CTRL - -> DH : removerCreditos(nifCliente, creds)
activate DH

deactivate DH
UI - -> CLI : remove os creditos

END OPT

deactivate CTRL
UI - -> CLI: gera o recibo e informa o sucesso da operação
deactivate UI
deactivate CLI
@enduml

PlantUML version 1.2021.01beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>