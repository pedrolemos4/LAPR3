<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1587px" preserveAspectRatio="none" style="width:3176px;height:1587px;" version="1.1" viewBox="0 0 3176 1587" width="3176px" zoomAndPan="magnify"><defs><filter height="300%" id="f5nomsff5xfj4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="1365.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="488.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="435.3594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="660.7578"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="359.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="1125.25"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="429.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="360.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="689.8906"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="1154.3828"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="151.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="1296.9141"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1115.5" y="177.6953"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1244" y="261.8281"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1384.5" y="345.9609"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1546.5" y="430.0938"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1676" y="489.2266"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1808" y="548.3594"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1808" y="903.4219"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1942.5" y="778.1563"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1942.5" y="837.2891"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="962.5547"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="1021.6875"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="1183.5156"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="122.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2427" y="1326.0469"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2911.5" y="719.0234"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="252.7969" style="stroke:#000000;stroke-width:2.0;" width="3019" x="10" y="622.4922"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="626.5" x2="626.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="936.5" x2="936.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1120.5" x2="1120.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1248.5" x2="1248.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1389.5" x2="1389.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1551.5" x2="1551.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1680.5" x2="1680.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1812.5" x2="1812.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1947.5" x2="1947.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2095.5" x2="2095.5" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2287" x2="2287" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2432" x2="2432" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2756" x2="2756" y1="1366.6953" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2916" x2="2916" y1="88.2969" y2="1502.7422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3097" x2="3097" y1="1062.3359" y2="1502.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="20" y="84.9951">Cliente</text><ellipse cx="49" cy="15" fill="#FEFECE" filter="url(#f5nomsff5xfj4)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49,23 L49,50 M36,31 L62,31 M49,50 L36,65 M49,50 L62,65 " fill="none" filter="url(#f5nomsff5xfj4)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="20" y="1514.7373">Cliente</text><ellipse cx="49" cy="1528.0391" fill="#FEFECE" filter="url(#f5nomsff5xfj4)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49,1536.0391 L49,1563.0391 M36,1544.0391 L62,1544.0391 M49,1563.0391 L36,1578.0391 M49,1563.0391 L62,1578.0391 " fill="none" filter="url(#f5nomsff5xfj4)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="541.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="548.5" y="72.9951">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="541.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="548.5" y="1521.7373">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="821.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="828.5" y="72.9951">:RealizaEncomendaController</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="821.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="828.5" y="1521.7373">:RealizaEncomendaController</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="1062.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1069.5" y="72.9951">AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="1062.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1069.5" y="1521.7373">AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1188.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1233" y="56.6982">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1195.5" y="72.9951">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1188.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1233" y="1521.7373">app</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1195.5" y="1538.0342">:AplicacaoPOT</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="136" x="1319.5" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1364" y="56.6982">sessao</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1326.5" y="72.9951">:SessaoUtilizador</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="136" x="1319.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1364" y="1521.7373">sessao</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1326.5" y="1538.0342">:SessaoUtilizador</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1469.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1476.5" y="72.9951">:ClienteDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="160" x="1469.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="1476.5" y="1521.7373">:ClienteDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1643.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1650.5" y="72.9951">:Cliente</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="71" x="1643.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="1650.5" y="1521.7373">:Cliente</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="1728.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1735.5" y="72.9951">:ProdutoDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="165" x="1728.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1735.5" y="1521.7373">:ProdutoDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="76" x="1907.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1914.5" y="72.9951">:Produto</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="76" x="1907.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="1914.5" y="1521.7373">:Produto</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="192" x="1997.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="2004.5" y="72.9951">:EncomendaDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="192" x="1997.5" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="2004.5" y="1521.7373">:EncomendaDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="2234" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="2241" y="72.9951">EnderecoDB</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="103" x="2234" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="2241" y="1521.7373">EnderecoDB</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="158" x="2351" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2358" y="72.9951">:ReciboDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="158" x="2351" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2358" y="1521.7373">:ReciboDataHandler</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="2708" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="2715" y="1521.7373">rec:Recibo</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="201" x="2814" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="2880" y="56.6982">lprodutos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2821" y="72.9951">:ListaProdutosEncomenda</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="201" x="2814" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="2880" y="1521.7373">lprodutos</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2821" y="1538.0342">:ListaProdutosEncomenda</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="3029" y="1501.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="3036" y="1521.7373">enc: Encomenda</text><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="1365.3125" style="stroke:#A80036;stroke-width:1.0;" width="10" x="44" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="488.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="435.3594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="660.7578"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="359.4922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="622" y="1125.25"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="429.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="360.9297" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="689.8906"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="1154.3828"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="151.6953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="932" y="1296.9141"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1115.5" y="177.6953"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1244" y="261.8281"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1384.5" y="345.9609"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1546.5" y="430.0938"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1676" y="489.2266"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1808" y="548.3594"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1808" y="903.4219"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1942.5" y="778.1563"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1942.5" y="837.2891"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="962.5547"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="1021.6875"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2090.5" y="1183.5156"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="122.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2427" y="1326.0469"/><rect fill="#FFFFFF" filter="url(#f5nomsff5xfj4)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2911.5" y="719.0234"/><polygon fill="#A80036" points="610,115.4297,620,119.4297,610,123.4297,614,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="616" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="61" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="74" y="114.3638">pretende realizar uma encomenda</text><polygon fill="#A80036" points="920,144.5625,930,148.5625,920,152.5625,924,148.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="632" x2="926" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="639" y="143.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="652" y="143.4966">getListClients()</text><polygon fill="#A80036" points="1103.5,173.6953,1113.5,177.6953,1103.5,181.6953,1107.5,177.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="942" x2="1109.5" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="949" y="172.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="961" y="172.6294">app = getInstance()</text><polygon fill="#A80036" points="1232,257.8281,1242,261.8281,1232,265.8281,1236,261.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="942" x2="1238" y1="261.8281" y2="261.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="949" y="256.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="962" y="256.7622">sessao = getSessaoAtual()</text><polygon fill="#A80036" points="1372.5,341.9609,1382.5,345.9609,1372.5,349.9609,1376.5,345.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1378.5" y1="345.9609" y2="345.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="949" y="340.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="962" y="340.895">email = getEmail()</text><polygon fill="#A80036" points="1534.5,426.0938,1544.5,430.0938,1534.5,434.0938,1538.5,430.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1540.5" y1="430.0938" y2="430.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="949" y="425.0278">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="962" y="425.0278">cliente = getClienteByEmail(email)</text><polygon fill="#A80036" points="1664,485.2266,1674,489.2266,1664,493.2266,1668,489.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1670" y1="489.2266" y2="489.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="949" y="484.1606">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="962" y="484.1606">nifCLiente = getNif()</text><polygon fill="#A80036" points="1796,544.3594,1806,548.3594,1796,552.3594,1800,548.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1802" y1="548.3594" y2="548.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="949" y="543.2935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="962" y="543.2935">getListaStock()</text><polygon fill="#A80036" points="65,603.4922,55,607.4922,65,611.4922,61,607.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="626" y1="607.4922" y2="607.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71" y="602.4263">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="531" x="84" y="602.4263">apresenta lista de produtos e pede para selecionar os produtos para a encomenda</text><path d="M10,622.4922 L88,622.4922 L88,629.4922 L78,639.4922 L10,639.4922 L10,622.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="252.7969" style="stroke:#000000;stroke-width:2.0;" width="3019" x="10" y="622.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="25" y="635.5591">loop</text><polygon fill="#A80036" points="610,656.7578,620,660.7578,610,664.7578,614,660.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="616" y1="660.7578" y2="660.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="61" y="655.6919">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="84" y="655.6919">introduz o produto</text><polygon fill="#A80036" points="920,685.8906,930,689.8906,920,693.8906,924,689.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="632" x2="926" y1="689.8906" y2="689.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="639" y="684.8247">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="661" y="684.8247">produtoEncomenda(produto)</text><polygon fill="#A80036" points="2899.5,715.0234,2909.5,719.0234,2899.5,723.0234,2903.5,719.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="2905.5" y1="719.0234" y2="719.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="713.9575">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="971" y="713.9575">addNovoProduto(produto)</text><polygon fill="#A80036" points="1930.5,774.1563,1940.5,778.1563,1930.5,782.1563,1934.5,778.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1936.5" y1="778.1563" y2="778.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="949" y="773.0903">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="970" y="773.0903">preco = getPreco()</text><polygon fill="#A80036" points="1930.5,833.2891,1940.5,837.2891,1930.5,841.2891,1934.5,837.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1936.5" y1="837.2891" y2="837.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="832.2231">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="971" y="832.2231">peso = getPeso()</text><polygon fill="#A80036" points="1796,899.4219,1806,903.4219,1796,907.4219,1800,903.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="1802" y1="903.4219" y2="903.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="898.356">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="971" y="898.356">lista = getListaProdutos()</text><polygon fill="#A80036" points="2078.5,958.5547,2088.5,962.5547,2078.5,966.5547,2082.5,962.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="2084.5" y1="962.5547" y2="962.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="957.4888">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="971" y="957.4888">dataPedida = getData()</text><polygon fill="#A80036" points="2078.5,1017.6875,2088.5,1021.6875,2078.5,1025.6875,2082.5,1021.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="2084.5" y1="1021.6875" y2="1021.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="1016.6216">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="536" x="971" y="1016.6216">enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)</text><polygon fill="#A80036" points="3017,1046.8203,3027,1050.8203,3017,1054.8203,3021,1050.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2095.5" x2="3023" y1="1050.8203" y2="1050.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2102.5" y="1045.7544">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="428" x="2124.5" y="1045.7544">create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="133" x="3029" y="1029.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="3036" y="1049.6826">enc: Encomenda</text><polygon fill="#A80036" points="65,1092.1172,55,1096.1172,65,1100.1172,61,1096.1172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="59" x2="626" y1="1096.1172" y2="1096.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="71" y="1091.0513">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="93" y="1091.0513">apresenta a encomenda e pede confirmação</text><polygon fill="#A80036" points="610,1121.25,620,1125.25,610,1129.25,614,1125.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="616" y1="1125.25" y2="1125.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="61" y="1120.1841">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="84" y="1120.1841">confirma</text><polygon fill="#A80036" points="920,1150.3828,930,1154.3828,920,1158.3828,924,1154.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="632" x2="926" y1="1154.3828" y2="1154.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="639" y="1149.3169">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="661" y="1149.3169">registaEncomenda(enc)</text><polygon fill="#A80036" points="2078.5,1179.5156,2088.5,1183.5156,2078.5,1187.5156,2082.5,1183.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="2084.5" y1="1183.5156" y2="1183.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="1178.4497">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="971" y="1178.4497">registaEncomenda(encomenda)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2100.5" x2="2142.5" y1="1212.6484" y2="1212.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2142.5" x2="2142.5" y1="1212.6484" y2="1225.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2101.5" x2="2142.5" y1="1225.6484" y2="1225.6484"/><polygon fill="#A80036" points="2111.5,1221.6484,2101.5,1225.6484,2111.5,1229.6484,2107.5,1225.6484" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="2107.5" y="1207.5825">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="2128.5" y="1207.5825">validaEncomenda(enc)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2100.5" x2="2142.5" y1="1259.7813" y2="1259.7813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2142.5" x2="2142.5" y1="1259.7813" y2="1272.7813"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2095.5" x2="2142.5" y1="1272.7813" y2="1272.7813"/><polygon fill="#A80036" points="2105.5,1268.7813,2095.5,1272.7813,2105.5,1276.7813,2101.5,1272.7813" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2107.5" y="1254.7153">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="2129.5" y="1254.7153">addEncomenda(enc)</text><polygon fill="#A80036" points="920,1292.9141,930,1296.9141,920,1300.9141,924,1296.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="632" x2="926" y1="1296.9141" y2="1296.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="639" y="1291.8481">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="661" y="1291.8481">novoRecibo(nifCliente, lista, dataRecibo)</text><polygon fill="#A80036" points="2415,1322.0469,2425,1326.0469,2415,1330.0469,2419,1326.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942" x2="2421" y1="1326.0469" y2="1326.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="949" y="1320.981">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="971" y="1320.981">create(nifCliente, lista, dataRecibo)</text><polygon fill="#A80036" points="2696,1351.1797,2706,1355.1797,2696,1359.1797,2700,1355.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2437" x2="2702" y1="1355.1797" y2="1355.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2444" y="1350.1138">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="2466" y="1350.1138">create(nifCliente, lista, dataRecibo)</text><rect fill="#FEFECE" filter="url(#f5nomsff5xfj4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="2708" y="1334.0469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="2715" y="1354.042">rec:Recibo</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2437" x2="2479" y1="1400.4766" y2="1400.4766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2479" x2="2479" y1="1400.4766" y2="1413.4766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2438" x2="2479" y1="1413.4766" y2="1413.4766"/><polygon fill="#A80036" points="2448,1409.4766,2438,1413.4766,2448,1417.4766,2444,1413.4766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2444" y="1395.4106">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="2466" y="1395.4106">validateRecibo(rec)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2437" x2="2479" y1="1447.6094" y2="1447.6094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2479" x2="2479" y1="1447.6094" y2="1460.6094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2432" x2="2479" y1="1460.6094" y2="1460.6094"/><polygon fill="#A80036" points="2442,1456.6094,2432,1460.6094,2442,1464.6094,2438,1460.6094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2444" y="1442.5435">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="2466" y="1442.5435">addRecibo(rec)</text><polygon fill="#A80036" points="60,1480.7422,50,1484.7422,60,1488.7422,56,1484.7422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="54" x2="626" y1="1484.7422" y2="1484.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="66" y="1479.6763">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="88" y="1479.6763">informa o sucesso da operação</text><!--MD5=[839c298c605a636b1345f1e943610a9f]
@startuml
autonumber
'hide footbox
actor "Cliente" as CLI

participant ":RealizaEncomendaUI" as UI
participant ":RealizaEncomendaController" as CTRL
participant "AplicacaoPOT" as _APP
participant "app\n:AplicacaoPOT" as APP
participant "sessao\n:SessaoUtilizador" as SESSAO
participant ":ClienteDataHandler" as DH
participant ":Cliente" as CLIEN
participant ":ProdutoDataHandler" as PDH
participant ":Produto" as PRO
participant ":EncomendaDataHandler" as EDH
participant "EnderecoDB" as END
participant ":ReciboDataHandler" as RDH
participant "rec:Recibo" as REC
participant "lprodutos\n:ListaProdutosEncomenda" as LPROD
participant "enc: Encomenda" as ENC


CLI - -> UI : pretende realizar uma encomenda
activate CLI
activate UI

UI - -> CTRL : getListClients()
activate CTRL

CTRL -> _APP: app = getInstance()
activate _APP
|||
deactivate _APP

CTRL -> APP: sessao = getSessaoAtual()
activate APP
|||
deactivate APP

CTRL - -> SESSAO : email = getEmail()
activate SESSAO
|||
deactivate SESSAO


CTRL - -> DH : cliente = getClienteByEmail(email)
activate DH
deactivate DH

CTRL - -> CLIEN : nifCLiente = getNif()
activate CLIEN
deactivate CLIEN

deactivate DH
CTRL - -> PDH : getListaStock()
activate PDH
deactivate PDH

deactivate DH
deactivate CTRL

UI - -> CLI : apresenta lista de produtos e pede para selecionar os produtos para a encomenda
deactivate UI


LOOP
CLI - -> UI : introduz o produto
activate UI

UI - -> CTRL : produtoEncomenda(produto)
activate CTRL

CTRL - -> LPROD : addNovoProduto(produto)
activate LPROD

deactivate PDH
deactivate LPROD

CTRL - -> PRO : preco = getPreco()
activate PRO
deactivate PRO

CTRL - -> PRO : peso = getPeso()
activate PRO
deactivate PRO

END LOOP

CTRL - -> PDH : lista = getListaProdutos()
activate PDH
deactivate PDH

CTRL - -> EDH : dataPedida = getData()
activate EDH
deactivate EDH

CTRL - -> EDH : enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
activate EDH

EDH - -> ENC ** : create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
deactivate EDH

deactivate CTRL

UI - -> CLI : apresenta a encomenda e pede confirmação
deactivate UI

CLI - -> UI : confirma
activate UI

UI - -> CTRL : registaEncomenda(enc)
activate CTRL

CTRL - -> EDH : registaEncomenda(encomenda)
activate EDH
EDH -> EDH : validaEncomenda(enc)
EDH -> EDH: addEncomenda(enc)
deactivate EDH

deactivate CTRL

UI - -> CTRL : novoRecibo(nifCliente, lista, dataRecibo)
activate CTRL

CTRL - -> RDH : create(nifCliente, lista, dataRecibo)
activate RDH

RDH - -> REC ** : create(nifCliente, lista, dataRecibo)

RDH - -> RDH : validateRecibo(rec)

RDH - -> RDH : addRecibo(rec)
deactivate RDH

deactivate CTRL

UI - -> CLI : informa o sucesso da operação
deactivate UI
deactivate CLI
@enduml

@startuml
autonumber
actor "Cliente" as CLI

participant ":RealizaEncomendaUI" as UI
participant ":RealizaEncomendaController" as CTRL
participant "AplicacaoPOT" as _APP
participant "app\n:AplicacaoPOT" as APP
participant "sessao\n:SessaoUtilizador" as SESSAO
participant ":ClienteDataHandler" as DH
participant ":Cliente" as CLIEN
participant ":ProdutoDataHandler" as PDH
participant ":Produto" as PRO
participant ":EncomendaDataHandler" as EDH
participant "EnderecoDB" as END
participant ":ReciboDataHandler" as RDH
participant "rec:Recibo" as REC
participant "lprodutos\n:ListaProdutosEncomenda" as LPROD
participant "enc: Encomenda" as ENC


CLI - -> UI : pretende realizar uma encomenda
activate CLI
activate UI

UI - -> CTRL : getListClients()
activate CTRL

CTRL -> _APP: app = getInstance()
activate _APP
|||
deactivate _APP

CTRL -> APP: sessao = getSessaoAtual()
activate APP
|||
deactivate APP

CTRL - -> SESSAO : email = getEmail()
activate SESSAO
|||
deactivate SESSAO


CTRL - -> DH : cliente = getClienteByEmail(email)
activate DH
deactivate DH

CTRL - -> CLIEN : nifCLiente = getNif()
activate CLIEN
deactivate CLIEN

deactivate DH
CTRL - -> PDH : getListaStock()
activate PDH
deactivate PDH

deactivate DH
deactivate CTRL

UI - -> CLI : apresenta lista de produtos e pede para selecionar os produtos para a encomenda
deactivate UI


LOOP
CLI - -> UI : introduz o produto
activate UI

UI - -> CTRL : produtoEncomenda(produto)
activate CTRL

CTRL - -> LPROD : addNovoProduto(produto)
activate LPROD

deactivate PDH
deactivate LPROD

CTRL - -> PRO : preco = getPreco()
activate PRO
deactivate PRO

CTRL - -> PRO : peso = getPeso()
activate PRO
deactivate PRO

END LOOP

CTRL - -> PDH : lista = getListaProdutos()
activate PDH
deactivate PDH

CTRL - -> EDH : dataPedida = getData()
activate EDH
deactivate EDH

CTRL - -> EDH : enc = novaEncomenda(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
activate EDH

EDH - -> ENC ** : create(lista, endereco, nifCliente, dataPedida, preco, peso, estado)
deactivate EDH

deactivate CTRL

UI - -> CLI : apresenta a encomenda e pede confirmação
deactivate UI

CLI - -> UI : confirma
activate UI

UI - -> CTRL : registaEncomenda(enc)
activate CTRL

CTRL - -> EDH : registaEncomenda(encomenda)
activate EDH
EDH -> EDH : validaEncomenda(enc)
EDH -> EDH: addEncomenda(enc)
deactivate EDH

deactivate CTRL

UI - -> CTRL : novoRecibo(nifCliente, lista, dataRecibo)
activate CTRL

CTRL - -> RDH : create(nifCliente, lista, dataRecibo)
activate RDH

RDH - -> REC ** : create(nifCliente, lista, dataRecibo)

RDH - -> RDH : validateRecibo(rec)

RDH - -> RDH : addRecibo(rec)
deactivate RDH

deactivate CTRL

UI - -> CLI : informa o sucesso da operação
deactivate UI
deactivate CLI
@enduml

PlantUML version 1.2020.27beta8(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>