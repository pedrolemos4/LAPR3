@startuml
skinparam classAttributeIconSize 0
left to right direction


class RealizaEncomendaUI {
    
}

class RealizaEncomendaController {
    +getListClients()
    +produtoEncomenda(produto)
    +registaEncomenda(enc)
    +novoRecibo(nifCliente, lista, precoTotal, dataRecibo)
    +verificaProdutoStock(prod)
    +getPrecoTotal()
    +removeCreditos(nifCliente, precoTotal)
    +getCreditosData(dataPedida, precoTotal)
}

class ClienteDataHandler {
    +Cliente getClienteByEmail()
    +getEnderecoCliente(cliente)
    +removeCreditos(nifCliente, precoTotal)
}

class EmailDB {
    +sendEmail(email, assunto, mensagem)
}

class ReciboDataHandler {
    +validateRecibo(rec)
    +addRecibo(rec)
    +create(nifCliente, lista, precoTotal, dataRecibo)
}

class ProdutoDataHandler {
    +List<Produto> getListaStock()
    +List<Produto> getListaProdutos()
    +addNovoProduto(produto)
}

class EncomendaDataHandler {
    +Encomenda novaEncomenda(lista, cliente, idEncomenda, dataPedida, preco, peso)
    +registarEncomenda(encomenda)
    +validaEncomenda(enc)
    +addEncomenda(enc)
    +getData()
    +getCreditosData(dataPedida, precoTotal)
}

class SessaoUtilizador{
  +getEmail()
}

class Entrega {
  -idEntrega
  -dataInicio
  -dataFim
}

class Recibo {
  -idRecibo
  -precoTotal
  -lista
  -dataRecibo
  +create(nifCliente, lista, precoTotal, dataRecibo)
}

class Encomenda {
  -idEncomenda
  -dataPedida
  -preco
  -peso
  -taxa
  +create(lista, cliente, idEncomenda, dataPedida, preco, peso)
}

class Produto {
    -idProduto
    -designacao
    -peso
    -precoBase
    +getPeso()
    +getPreco()
}

class Endereco {
  -morada
  -latitude
  -longitude
  +getMorada()
}

class Cliente {
  -NIF
  -nome
  -email
  -numeroSegurancaSocial
  -password
  -credito
}

RealizaEncomendaUI .> RealizaEncomendaController
RealizaEncomendaController .> SessaoUtilizador
RealizaEncomendaController .> AplicacaoPOT
RealizaEncomendaController .> ClienteDataHandler
RealizaEncomendaController .> ProdutoDataHandler
RealizaEncomendaController .> EncomendaDataHandler
RealizaEncomendaController .> ReciboDataHandler
RealizaEncomendaController .> EmailDB

ClienteDataHandler .> Cliente
ProdutoDataHandler .> Produto
EncomendaDataHandler .> Encomenda
ReciboDataHandler .> Recibo

Recibo "1" -- "1" Encomenda: referente a >
Recibo "1" -- "1" Cliente: referente a >
Entrega "1" -- "*" Encomenda : possui >
Cliente "1" -- "*" Encomenda: realiza e paga >
Encomenda "1" -- "1..*" Produto: tem >
Cliente "1" -- "1" Endereco: tem >

@enduml