<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="658px" preserveAspectRatio="none" style="width:1626px;height:658px;" version="1.1" viewBox="0 0 1626 658" width="1626px" zoomAndPan="magnify"><defs><filter height="300%" id="f10kfrs4zb2o65" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="457.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="54" y="98.2969"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="235.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="561" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="171.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="561" y="384.2266"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="177.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="855" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="855" y="413.3594"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="177.6953"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="236.8281"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="295.9609"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1329" y="442.4922"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="88.2969" y2="573.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="565.5" x2="565.5" y1="88.2969" y2="573.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="859.5" x2="859.5" y1="88.2969" y2="573.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1199" x2="1199" y1="88.2969" y2="573.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1334" x2="1334" y1="88.2969" y2="573.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="5" y="84.9951">Administrador</text><ellipse cx="59" cy="15" fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M59,23 L59,50 M46,31 L72,31 M59,50 L46,65 M59,50 L72,65 " fill="none" filter="url(#f10kfrs4zb2o65)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="5" y="585.8857">Administrador</text><ellipse cx="59" cy="599.1875" fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M59,607.1875 L59,634.1875 M46,615.1875 L72,615.1875 M59,634.1875 L46,649.1875 M59,634.1875 L72,649.1875 " fill="none" filter="url(#f10kfrs4zb2o65)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="480.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="487.5" y="72.9951">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="167" x="480.5" y="572.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="487.5" y="592.8857">:RealizaEncomendaUI</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="744.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="751.5" y="72.9951">:PedirItemFarmaciaController</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="227" x="744.5" y="572.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="751.5" y="592.8857">:PedirItemFarmaciaController</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="1145" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1152" y="72.9951">:FarmaciaDB</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="104" x="1145" y="572.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1152" y="592.8857">:FarmaciaDB</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1263" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1270" y="72.9951">:TransferenciaDB</text><rect fill="#FEFECE" filter="url(#f10kfrs4zb2o65)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="138" x="1263" y="572.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="1270" y="592.8857">:TransferenciaDB</text><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="457.5938" style="stroke:#A80036;stroke-width:1.0;" width="10" x="54" y="98.2969"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="235.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="561" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="171.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="561" y="384.2266"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="177.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="855" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="106.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="855" y="413.3594"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="177.6953"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="236.8281"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1194" y="295.9609"/><rect fill="#FFFFFF" filter="url(#f10kfrs4zb2o65)" height="77.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1329" y="442.4922"/><polygon fill="#A80036" points="549,115.4297,559,119.4297,549,123.4297,553,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64" x2="555" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="84" y="114.3638">novo pedido de produto</text><polygon fill="#A80036" points="843,144.5625,853,148.5625,843,152.5625,847,148.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="571" x2="849" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="578" y="143.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="591" y="143.4966">getListaFarmaciaByProduto(prod, qntd)</text><polygon fill="#A80036" points="1182,173.6953,1192,177.6953,1182,181.6953,1186,177.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="865" x2="1188" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="872" y="172.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="884" y="172.6294">farms = getLstFarmaciasByProdutos(p, quant)</text><polygon fill="#A80036" points="1182,232.8281,1192,236.8281,1182,240.8281,1186,236.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="865" x2="1188" y1="236.8281" y2="236.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="872" y="231.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="885" y="231.7622">grafo = generateGrafo(farms)</text><polygon fill="#A80036" points="1182,291.9609,1192,295.9609,1182,299.9609,1186,295.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="865" x2="1188" y1="295.9609" y2="295.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="872" y="290.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="885" y="290.895">fDest = getFarmaciaProxima(grafo,nif)</text><polygon fill="#A80036" points="75,351.0938,65,355.0938,75,359.0938,71,355.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69" x2="565" y1="355.0938" y2="355.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="81" y="350.0278">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="460" x="94" y="350.0278">apresenta farmácia mais próxima com o produto e solitica confirmação</text><polygon fill="#A80036" points="549,380.2266,559,384.2266,549,388.2266,553,384.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64" x2="555" y1="384.2266" y2="384.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71" y="379.1606">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="84" y="379.1606">confirma</text><polygon fill="#A80036" points="843,409.3594,853,413.3594,843,417.3594,847,413.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="571" x2="849" y1="413.3594" y2="413.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="578" y="408.2935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="591" y="408.2935">realizaPedido(fOrig,fDest,prod,qtd)</text><polygon fill="#A80036" points="1317,438.4922,1327,442.4922,1317,446.4922,1321,442.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="865" x2="1323" y1="442.4922" y2="442.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="872" y="437.4263">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="885" y="437.4263">realizaPedido(fOrig,fDest,prod,qtd)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1339" x2="1381" y1="471.625" y2="471.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1381" x2="1381" y1="471.625" y2="484.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1340" x2="1381" y1="484.625" y2="484.625"/><polygon fill="#A80036" points="1350,480.625,1340,484.625,1350,488.625,1346,484.625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1346" y="466.5591">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="1369" y="466.5591">addTransferencia(fOrig,fDest,prod,qtd)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1339" x2="1381" y1="518.7578" y2="518.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1381" x2="1381" y1="518.7578" y2="531.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1334" x2="1381" y1="531.7578" y2="531.7578"/><polygon fill="#A80036" points="1344,527.7578,1334,531.7578,1344,535.7578,1340,531.7578" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1346" y="513.6919">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1368" y="513.6919">enviaStock(fOrig,fDest,prod,qtd)</text><polygon fill="#A80036" points="70,551.8906,60,555.8906,70,559.8906,66,555.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="64" x2="565" y1="555.8906" y2="555.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="76" y="550.8247">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="98" y="550.8247">informa sucesso da operação</text><!--MD5=[79cf75de44232f7417753f210c2cb5a3]
@startuml
autonumber

actor "Administrador" as ADM
participant ":RealizaEncomendaUI" as UI
participant ":PedirItemFarmaciaController" as CTL
participant ":FarmaciaDB" as FDB
participant ":TransferenciaDB" as TDB

activate ADM
ADM -> UI : novo pedido de produto
activate UI
UI -> CTL : getListaFarmaciaByProduto(prod, qntd)
activate CTL

CTL -> FDB: farms = getLstFarmaciasByProdutos(p, quant)
activate FDB

deactivate FDB

CTL -> FDB : grafo = generateGrafo(farms)
activate FDB
deactivate FDB

CTL -> FDB : fDest = getFarmaciaProxima(grafo,nif)
activate FDB
deactivate FDB

deactivate CTL

UI - -> ADM : apresenta farmácia mais próxima com o produto e solitica confirmação
deactivate UI
ADM -> UI : confirma
activate UI
UI -> CTL : realizaPedido(fOrig,fDest,prod,qtd)

activate CTL
CTL -> TDB :realizaPedido(fOrig,fDest,prod,qtd)

activate TDB
TDB -> TDB : addTransferencia(fOrig,fDest,prod,qtd)

TDB -> TDB : enviaStock(fOrig,fDest,prod,qtd)
deactivate TDB
deactivate CTL
UI - -> ADM: informa sucesso da operação

deactivate UI
deactivate ADM
@enduml

PlantUML version 1.2021.01beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>